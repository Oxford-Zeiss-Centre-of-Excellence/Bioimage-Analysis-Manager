# BAM Manifest Template
# All fields documented. Only project.name is required.
# Copy this file to your project root and customize.

# ============================================================================
# PROJECT - Core project metadata (REQUIRED)
# ============================================================================
project:
  name: ""                    # REQUIRED: Project name/identifier
  created: 2024-01-01         # Auto-set on init
  status: active              # active | completed | archived | on-hold

# ============================================================================
# PEOPLE - Team members and collaborators
# ============================================================================
people:
  analyst: ""                 # Primary analyst name
  collaborators:              # List of collaborators
    - name: ""
      role: ""                # PI | collaborator | consultant | student
      email: ""
      affiliation: ""

# ============================================================================
# TAGS - Categorization labels
# ============================================================================
tags:
  - microscopy
  - segmentation
  # Add relevant tags for your project

# ============================================================================
# DATASETS - Data source and local cache configuration
# ============================================================================
datasets:
  - name: ""                  # REQUIRED: Dataset identifier
    endpoint: ""              # Storage label: Local | I Drive | MSD CEPH | RFS | HDD1
    source: ""                # Original data path (e.g., /mnt/ceph/project/raw)
    local: ""                 # Local cache path (e.g., /data/local/project)
    locally_mounted: false    # True if source is directly accessible
    description: ""           # What the data contains
    format: ""                # tiff | zarr | hdf5 | nd2 | czi | etc.
    raw_size_gb: null         # Approximate raw data size
    raw_size_unit: gb         # gb | tb
    compressed: null          # true | false
    uncompressed_size_gb: null
    uncompressed_size_unit: gb

# ============================================================================
# ACQUISITION - Imaging parameters and metadata
# ============================================================================
acquisition:
  sessions:
    - imaging_date: null      # YYYY-MM-DD
      microscope: ""          # Microscope model/name
      modality: ""            # confocal | widefield | lightsheet | EM | etc.
      objective: ""           # e.g., "40x/1.3 Oil"
      voxel_size:
        x_um: null
        y_um: null
        z_um: null
      time_interval_s: null   # For timelapse
      notes: ""
      channels:
        - name: ""
          fluorophore: ""
          excitation_nm: null
          emission_nm: null
  channels:
    - name: ""
      fluorophore: ""
      excitation_nm: null
      emission_nm: null

# ============================================================================
# TOOLS - Software and analysis environment
# ============================================================================
tools:
  git_remote: ""              # Remote URL (auto-detected from .git)
  environment: ""             # conda | pixi | venv | uv | poetry | docker | devcontainer | renv | nix
  env_file: ""                # Path to environment.yaml or requirements.txt
  languages:
    - Python
    # - R
    # - Fiji macro
  software:
    - Fiji/ImageJ
    # - napari
    # - QuPath
  cluster_packages:
    - SLURM
    # - Snakemake

# =========================================================================
# METHOD - Analysis method documentation
# =========================================================================
method:
  file_path: ""               # Path to method.md (e.g., .bam/doc/method.md)
  template_used: ""           # Template name if created from UI

# =========================================================================
# HARDWARE - Compute environment profiles
# =========================================================================
hardware_profiles:
  - name: local
    cpu: "Intel i9"
    cores: "16"
    ram: "64 GB"
    gpu: "1x RTX 4090"
    notes: ""
    is_cluster: false
    partition: ""
    node_type: ""
  - name: cluster-gpu
    cpu: "AMD EPYC"
    cores: "64"
    ram: "512 GB"
    gpu: "4x A100"
    notes: "Shared GPU queue"
    is_cluster: true
    partition: "gpu"
    node_type: "a100"

# ============================================================================
# BILLING - Project funding and time tracking
# ============================================================================
billing:
  fund_code: ""               # Institutional fund/grant code
  hourly_rate: null           # If applicable
  budget_hours: null          # Allocated hours
  spent_hours: null           # Auto-calculated from worklog
  start_date: null
  end_date: null
  notes: ""

# ============================================================================
# WORKLOG - Time tracking and task logging (Log tab)
# ============================================================================
worklog:
  file_path: ".bam/log/tasks.yaml" # Path to worklog data file (external storage)
  version: 2                  # Schema version (for future migrations)
  created: null               # Auto-set when worklog initialized
  last_updated: null          # Auto-updated on save

# ============================================================================
# PUBLICATION - Publication and sharing information
# ============================================================================
publication:
  status: none                # none | in-prep | submitted | revision | accepted | published
  target_journal: ""
  manuscript_path: ""         # Path to manuscript file

  # ──────────────────────────────────────────────────────────────────────────
  # FIGURES - Hierarchical figure tracking with full lineage
  #
  # Structure: Figure → Panel → Element (infinite nesting supported)
  #   - Containers (Figure, Panel): id, title, description, children[]
  #   - Elements (leaf nodes): full lineage tracking
  #
  # Element source_type options:
  #   - script: Generated by a script (Python, R, etc.)
  #   - software: Generated by software (Prism, SPSS, ImageJ, Excel, etc.)
  #   - manual: Manual editing (Illustrator, Inkscape, PowerPoint)
  #   - raw: Raw acquisition (microscope image, photo)
  # ──────────────────────────────────────────────────────────────────────────
  figures:
    # Example: Complete figure hierarchy
    - id: fig1
      title: "Experimental Setup"
      description: "Overview of sample preparation and imaging"
      children:
        # Panel 1a
        - id: "1a"
          title: "Sample Preparation"
          children:
            # Script-generated plot
            - id: schematic
              output_path: "figures/fig1/1a-schematic.pdf"
              source_type: script
              source_ref: "scripts/plot_schematic.py"
              input_files:
                - "data/protocol.yaml"
              parameters: "--style publication"
              status: ready
              version: 2
              description: "Workflow schematic"
              created: 2024-01-15
              updated: 2024-01-20

            # Software-generated (e.g., GraphPad Prism)
            - id: bar-chart
              output_path: "figures/fig1/1a-bars.pdf"
              source_type: software
              source_ref: "GraphPad Prism 9"
              input_files:
                - "data/measurements.pzfx"
              parameters: "Bar graph, mean ± SEM, unpaired t-test, *p<0.05"
              status: ready
              version: 1
              description: "Quantification of sample purity"
              created: 2024-01-18

        # Panel 1b
        - id: "1b"
          title: "Microscopy Setup"
          children:
            # Raw microscopy image
            - id: confocal
              output_path: "figures/fig1/1b-confocal.tif"
              source_type: raw
              source_ref: "Zeiss LSM 880"
              input_files:
                - "raw/sample1_tile01.czi"
              parameters: "40x/1.3 Oil, 488nm/561nm, z-stack 0.5µm"
              status: ready
              version: 1
              description: "Representative confocal z-projection"
              created: 2024-01-10

            # Manual composite (Illustrator)
            - id: composite
              output_path: "figures/fig1/1b-composite.ai"
              source_type: manual
              source_ref: "Adobe Illustrator 2024"
              input_files:
                - "figures/fig1/1b-confocal.tif"
                - "figures/fig1/1b-scale.svg"
              parameters: "Added scale bar, adjusted contrast"
              status: draft
              version: 1
              description: "Final composite with annotations"
              created: 2024-01-22

    # Example: Simple figure with direct elements (no panels)
    - id: fig2
      title: "Analysis Results"
      children:
        - id: heatmap
          output_path: "figures/fig2/heatmap.pdf"
          source_type: script
          source_ref: "notebooks/analysis.ipynb"
          input_files:
            - "data/processed/matrix.csv"
          parameters: "Cell 15, seaborn clustermap"
          status: draft
          version: 1
          description: "Correlation heatmap"
          created: 2024-01-25

  preprint_doi: ""
  published_doi: ""
  github_repo: ""
  zenodo_doi: ""              # For data/code archive
  notes: ""

# ============================================================================
# ARCHIVE - Long-term storage and preservation
# ============================================================================
archive:
  status: active              # active | pending-archive | archived
  endpoint: ""               # Storage endpoint (reuse data endpoints)
  archive_date: null
  archive_location: ""        # e.g., institutional archive path
  retention_years: null       # Data retention period
  backup_verified: false
  notes: ""

# ============================================================================
# TIMELINE - Project milestones and deadlines
# ============================================================================
timeline:
  milestones:
    - name: "Data acquisition complete"
      target_date: null
      actual_date: null
      status: pending         # pending | in-progress | completed | delayed | cancelled
      notes: ""
    - name: "Analysis complete"
      target_date: null
      actual_date: null
      status: pending
      notes: ""
    - name: "Manuscript draft"
      target_date: null
      actual_date: null
      status: pending
      notes: ""

# ============================================================================
# ARTIFACTS - Deliverables and outputs
# ============================================================================
artifacts:
  - path: ""                  # Relative path from project root
    endpoint: ""              # Storage endpoint (reuse data endpoints)
    type: figure              # figure | table | dataset | model | report | script
    status: draft             # draft | ready | delivered | published
    created: 2024-01-01
    updated: null
    description: ""

# ============================================================================
# HUB - Cross-project registry (managed by bam:hub)
# ============================================================================
hub:
  registered: false           # True when registered with ~/.ba-hub
  registered_date: null
  last_sync: null
